CREATE DATABASE Medios;

use Medios;

CREATE TABLE Medio_De_Prensa( 
	idMedio TINYINT PRIMARY KEY, 
	nombre VARCHAR(50), 
	cobertura VARCHAR(50), 
	aÃ±oFundacion SMALLINT, 
	urlPrincipal VARCHAR(300));

CREATE TABLE ubicacion(
    -> idUbicacion TINYINT PRIMARY KEY,
    -> comunidadAutonoma VARCHAR(50),
    -> ciudad VARCHAR(50),
    -> pais VARCHAR(50),
    -> continente VARCHAR(50),
    -> idMedio TINYINT,
    -> FOREIGN KEY (idMedio) REFERENCES Medio_De_Prensa(idMedio));

CREATE TABLE fundador(
    -> idFundador INT PRIMARY KEY,
    -> nombre VARCHAR(50),
    -> apellido VARCHAR(50),
    -> nacionalidad VARCHAR(50),
    -> profesion VARCHAR(50));

CREATE TABLE Ejemplo_Noticia_xpath(
    -> urlNoticia VARCHAR(300) PRIMARY KEY,
    -> xpathTitulo VARCHAR(1000),
    -> xpathFecha VARCHAR(1000),
    -> xpathContenido VARCHAR(1000));

CREATE TABLE categoria(
    -> urlCategoria VARCHAR(300) PRIMARY KEY,
    -> urlEjemplo VARCHAR(300),
    -> nombre VARCHAR(50),
    -> xpath VARCHAR(300),
    -> idMedio TINYINT,
    -> FOREIGN KEY (idMedio) REFERENCES Medio_De_Prensa(idMedio));

CREATE TABLE Red_Social(
    -> idRed SMALLINT PRIMARY KEY,
    -> nombre VARCHAR(50),
    -> usuario VARCHAR(50),
    -> seguidores SMALLINT,
    -> actSeguidores TIMESTAMP,
    -> ultimaPublicacion DATE,
    -> idMedio TINYINT,
    -> FOREIGN KEY (idMedio) REFERENCES Medio_De_Prensa(idMedio));

CREATE TABLE fundada( 
	idMedio TINYINT, 
	idFundador INT,
	PRIMARY KEY(idMedio, idFundador), 
	FOREIGN KEY (idMedio) REFERENCES Medio_De_Prensa(idMedio), 
	FOREIGN KEY (idFundador) REFERENCES fundador(idFundador));

ALTER Ejemplo_Noticia_xpath
    -> ADD idMedio TINYINT,
    -> ADD FOREIGN KEY(idMedio) REFERENCES Medio_De_prensa(idMedio);

ALTER TABLE Ejemplo_Noticia_xpath 
	ADD idMedio TINYINT, 
	ADD FOREIGN KEY (idMedio) REFERENCES Medio_De_Prensa(idMedio);

ALTER TABLE Medio_De_Prensa
    -> ADD urlNoticia VARCHAR(300),
    -> ADD FOREIGN KEY (urlNoticia) REFERENCES Ejemplo_Noticia_xpath(urlNoticia);