CREATE DATABASE datosComunales;

USE datosComunales;

CREATE TABLE pais(
	codigo VARCHAR(3) PRIMARY KEY,
	nombre VARCHAR(50),
	continente VARCHAR(50));

CREATE TABLE region(
	idRegion SMALLINT PRIMARY KEY,
	nombre VARCHAR(50),
	codigoPais VARCHAR(3),
	FOREIGN KEY (codigoPais) REFERENCES pais(codigo));

CREATE TABLE comuna(
	idComuna INT PRIMARY KEY,
	nombre VARCHAR(50),
	poblacion INT,
	superficie FLOAT,
	viviendas INT);

CREATE TABLE transporte(
	idTransporte INT PRIMARY KEY,
	cantViajesEducacion INT,
	cantViajesTrabajo INT,
	cantViajesOtro INT);

CREATE TABLE salud(
	idSalud INT PRIMARY KEY,
	cantEstablecimientos SMALLINT);

CREATE TABLE seguridad(
	idSeguridad INT PRIMARY KEY,
	umbralDelito FLOAT,
	accidentesTransito INT);

CREATE TABLE educacion(
	idEducacion INT PRIMARY KEY,
	centrosEdBasica INT
	centrosEdSuperior INT);

ALTER TABLE comuna
	ADD idTransporte INT, ADD FOREIGN KEY (idTransporte) REFERENCES transporte(idTransporte),
	ADD idSeguridad INT, ADD FOREIGN KEY (idSeguridad) REFERENCES seguridad(idSeguridad),
	ADD idSalud INT, ADD FOREIGN KEY (idSalud) REFERENCES salud(idSalud),
	 ADD idEducacion INT, ADD FOREIGN KEY (idEducacion) REFERENCES educacion(idEducacion));


ALTER TABLE salud
	ADD idComuna INT, ADD FOREIGN KEY (idComuna) REFERENCES comuna(idComuna);

ALTER TABLE seguridad
	ADD idComuna INT, ADD FOREIGN KEY (idComuna) REFERENCES comuna(idComuna);

ALTER TABLE transporte
	ADD idComuna INT, ADD FOREIGN KEY (idComuna) REFERENCES comuna(idComuna);

ALTER TABLE educacion
	ADD idComuna INT, ADD FOREIGN KEY (idComuna) REFERENCES comuna(idComuna);
